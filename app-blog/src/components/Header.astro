---
import { SITE_TITLE } from "../consts";
import HeaderLink from "./HeaderLink.astro";
---

<header
  class='m-0 px-4 py-6 bg-white/95 backdrop-blur-sm border-b-2 border-black sticky top-0 z-50'
>
  <nav class='flex justify-between items-center max-w-[1200px] mx-auto w-full'>
    <h2
      class='text-[1.5em] font-bold border-none bg-transparent shadow-none p-0 m-0 whitespace-nowrap'
    >
      <a href='/' class='no-underline text-black hover:bg-accent hover:text-white hover:px-2 transition-all border-none whitespace-nowrap'
        >{SITE_TITLE}</a
      >
    </h2>
    <div class='internal-links flex gap-4 absolute left-1/2 -translate-x-1/2'>
      <HeaderLink href='/'>home</HeaderLink>
      <HeaderLink href='/blog'>blog</HeaderLink>
      <HeaderLink href='/dev'>dev</HeaderLink>
      <HeaderLink href='/mind'>mind</HeaderLink>
      <HeaderLink href='/about'>bio</HeaderLink>
    </div>
    <div class='social-links flex gap-4 items-center justify-self-end'>
      <!-- Hidden admin access - appears when /#admin hash is present -->
      <a
        id='admin-ninja'
        href='/admin'
        class='hidden opacity-0 hover:opacity-100 transition-opacity p-2 -m-2'
        title='Admin Access'
      >
        <span class='sr-only'>Admin Access</span>
        <img 
          src='/ninja-icon-raw.png' 
          alt='Admin' 
          width='32' 
          height='32'
          class='ninja-icon'
        />
      </a>
      
      <a
        href='https://github.com/avoidstarch'
        target='_blank'
        class='flex text-black hover:bg-accent hover:text-white p-2 -m-2 transition-all border-none'
      >
        <span class='sr-only'>Go to Louis's GitHub page</span>
        <svg viewBox='0 0 16 16' aria-hidden='true' width='32' height='32'
          ><path
            fill='currentColor'
            d='M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z'
          ></path></svg
        >
      </a>
    </div>
  </nav>
</header>

<script is:inline>
  // Admin access detection via hash
  function checkAdminHash() {
    const adminNinja = document.getElementById('admin-ninja');
    console.log('Checking admin hash:', window.location.hash, 'Element:', adminNinja);
    
    if (window.location.hash === '#admin' && adminNinja) {
      console.log('Admin hash detected! Showing ninja icon');
      adminNinja.classList.remove('hidden', 'opacity-0');
      adminNinja.classList.add('flex', 'opacity-50');
    }
  }
  
  // Check on load and hash change
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', checkAdminHash);
  } else {
    checkAdminHash();
  }
  
  window.addEventListener('hashchange', checkAdminHash);
</script>

<style>
  /* Dark gray filter for ninja icon */
  .ninja-icon {
    filter: brightness(0.3) saturate(0);
    transition: filter 0.3s ease;
  }
  
  #admin-ninja:hover .ninja-icon {
    filter: brightness(0.5) saturate(0);
  }
</style>
